<!DOCTYPE html><html><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>shell</title><meta property="og:title" content="shell" /><meta property="og:type" content="website" /><meta name="description" content="The shell API provides access to CraftOS's command line interface." /><meta property="og:description" content="The shell API provides access to CraftOS's command line interface." /><meta property="og:image" content="https://devvie.cc/docs/cc/pack.png" /><meta property="og:site_name" content="CC: Tweaked" /><meta name="illuaminate:index" content="../index.json" /><link rel="stylesheet" href="../main.css?v=5ab962eb" type="text/css" /><!--
SPDX-FileCopyrightText: 2020 The CC: Tweaked Developers

SPDX-License-Identifier: MPL-2.0
-->

<meta name="theme-color" content="#c8d87c"></head><body><nav id="nav"><button id="nav-reveal" type="button">&#9776;</button><h1><a href=".././"><img src="../pack.png" alt="CC: Tweaked" /></a></h1><div class="nav-links"><h2 tabindex="0">Contents</h2><ul><li><a href="#v:execute" class="sidebar-link">execute</a></li><li><a href="#v:run" class="sidebar-link">run</a></li><li><a href="#v:exit" class="sidebar-link">exit</a></li><li><a href="#v:dir" class="sidebar-link">dir</a></li><li><a href="#v:setDir" class="sidebar-link">setDir</a></li><li><a href="#v:path" class="sidebar-link">path</a></li><li><a href="#v:setPath" class="sidebar-link">setPath</a></li><li><a href="#v:resolve" class="sidebar-link">resolve</a></li><li><a href="#v:resolveProgram" class="sidebar-link">resolveProgram</a></li><li><a href="#v:programs" class="sidebar-link">programs</a></li><li><a href="#v:complete" class="sidebar-link">complete</a></li><li><a href="#v:completeProgram" class="sidebar-link">completeProgram</a></li><li><a href="#v:setCompletionFunction" class="sidebar-link">setCompletionFunction</a></li><li><a href="#v:getCompletionInfo" class="sidebar-link">getCompletionInfo</a></li><li><a href="#v:getRunningProgram" class="sidebar-link">getRunningProgram</a></li><li><a href="#v:setAlias" class="sidebar-link">setAlias</a></li><li><a href="#v:clearAlias" class="sidebar-link">clearAlias</a></li><li><a href="#v:aliases" class="sidebar-link">aliases</a></li><li><a href="#v:openTab" class="sidebar-link">openTab</a></li><li><a href="#v:switchTab" class="sidebar-link">switchTab</a></li></ul><h2 tabindex="0">Globals</h2><ul><li><a href="_G.html" class="sidebar-link">_G</a></li><li><a href="colors.html" class="sidebar-link">colors</a></li><li><a href="colours.html" class="sidebar-link">colours</a></li><li><a href="commands.html" class="sidebar-link">commands</a></li><li><a href="disk.html" class="sidebar-link">disk</a></li><li><a href="fs.html" class="sidebar-link">fs</a></li><li><a href="gps.html" class="sidebar-link">gps</a></li><li><a href="help.html" class="sidebar-link">help</a></li><li><a href="http.html" class="sidebar-link">http</a></li><li><a href="io.html" class="sidebar-link">io</a></li><li><a href="keys.html" class="sidebar-link">keys</a></li><li><a href="multishell.html" class="sidebar-link">multishell</a></li><li><a href="os.html" class="sidebar-link">os</a></li><li><a href="paintutils.html" class="sidebar-link">paintutils</a></li><li><a href="parallel.html" class="sidebar-link">parallel</a></li><li><a href="peripheral.html" class="sidebar-link">peripheral</a></li><li><a href="rednet.html" class="sidebar-link">rednet</a></li><li><a href="settings.html" class="sidebar-link">settings</a></li><li><strong class="sidebar-link selected">shell</strong></li><li><a href="term.html" class="sidebar-link">term</a></li><li><a href="textutils.html" class="sidebar-link">textutils</a></li><li><a href="turtle.html" class="sidebar-link">turtle</a></li><li><a href="vector.html" class="sidebar-link">vector</a></li><li><a href="window.html" class="sidebar-link">window</a></li></ul><h2 class="collapsed" tabindex="0">Modules</h2><ul><li><a href="../library/cc.audio.dfpwm.html" class="sidebar-link">cc.audio.dfpwm</a></li><li><a href="../library/cc.completion.html" class="sidebar-link">cc.completion</a></li><li><a href="../library/cc.expect.html" class="sidebar-link">cc.expect</a></li><li><a href="../library/cc.image.nft.html" class="sidebar-link">cc.image.nft</a></li><li><a href="../library/cc.pretty.html" class="sidebar-link">cc.pretty</a></li><li><a href="../library/cc.require.html" class="sidebar-link">cc.require</a></li><li><a href="../library/cc.shell.completion.html" class="sidebar-link">cc.shell.completion</a></li><li><a href="../library/cc.strings.html" class="sidebar-link">cc.strings</a></li></ul><h2 class="collapsed" tabindex="0">Events</h2><ul><li><a href="../event/alarm.html" class="sidebar-link">alarm</a></li><li><a href="../event/char.html" class="sidebar-link">char</a></li><li><a href="../event/computer_command.html" class="sidebar-link">computer_command</a></li><li><a href="../event/disk.html" class="sidebar-link">disk</a></li><li><a href="../event/disk_eject.html" class="sidebar-link">disk_eject</a></li><li><a href="../event/file_transfer.html" class="sidebar-link">file_transfer</a></li><li><a href="../event/http_check.html" class="sidebar-link">http_check</a></li><li><a href="../event/http_failure.html" class="sidebar-link">http_failure</a></li><li><a href="../event/http_success.html" class="sidebar-link">http_success</a></li><li><a href="../event/key.html" class="sidebar-link">key</a></li><li><a href="../event/key_up.html" class="sidebar-link">key_up</a></li><li><a href="../event/modem_message.html" class="sidebar-link">modem_message</a></li><li><a href="../event/monitor_resize.html" class="sidebar-link">monitor_resize</a></li><li><a href="../event/monitor_touch.html" class="sidebar-link">monitor_touch</a></li><li><a href="../event/mouse_click.html" class="sidebar-link">mouse_click</a></li><li><a href="../event/mouse_drag.html" class="sidebar-link">mouse_drag</a></li><li><a href="../event/mouse_scroll.html" class="sidebar-link">mouse_scroll</a></li><li><a href="../event/mouse_up.html" class="sidebar-link">mouse_up</a></li><li><a href="../event/paste.html" class="sidebar-link">paste</a></li><li><a href="../event/peripheral.html" class="sidebar-link">peripheral</a></li><li><a href="../event/peripheral_detach.html" class="sidebar-link">peripheral_detach</a></li><li><a href="../event/rednet_message.html" class="sidebar-link">rednet_message</a></li><li><a href="../event/redstone.html" class="sidebar-link">redstone</a></li><li><a href="../event/speaker_audio_empty.html" class="sidebar-link">speaker_audio_empty</a></li><li><a href="../event/task_complete.html" class="sidebar-link">task_complete</a></li><li><a href="../event/term_resize.html" class="sidebar-link">term_resize</a></li><li><a href="../event/terminate.html" class="sidebar-link">terminate</a></li><li><a href="../event/timer.html" class="sidebar-link">timer</a></li><li><a href="../event/turtle_inventory.html" class="sidebar-link">turtle_inventory</a></li><li><a href="../event/websocket_closed.html" class="sidebar-link">websocket_closed</a></li><li><a href="../event/websocket_failure.html" class="sidebar-link">websocket_failure</a></li><li><a href="../event/websocket_message.html" class="sidebar-link">websocket_message</a></li><li><a href="../event/websocket_success.html" class="sidebar-link">websocket_success</a></li></ul><h2 class="collapsed" tabindex="0">Guides</h2><ul><li><a href="../guide/gps_setup.html" class="sidebar-link">Setting up GPS</a></li><li><a href="../guide/local_ips.html" class="sidebar-link">Allowing access to local IPs</a></li><li><a href="../guide/speaker_audio.html" class="sidebar-link">Playing audio with speakers</a></li><li><a href="../guide/using_require.html" class="sidebar-link">Reusing code with require</a></li></ul><h2 class="collapsed" tabindex="0">Reference</h2><ul><li><a href="../reference/feature_compat.html" class="sidebar-link">Lua 5.2/5.3 features in CC: Tweaked</a></li></ul></div></nav><div id="main"><div id="search-form" role="form"><input id="search-box" type="text" placeholder="Search..." autocomplete="off" tabindex="0"></input><div id="search-results"></div></div><section id="content"><h1>shell</h1><p>The shell API provides access to CraftOS's command line interface.</p>
<p>It allows you to <a href="shell.html#v:run" class="reference">start programs</a>, <a href="shell.html#v:setCompletionFunction" class="reference">add completion for a
program</a>, and much more.</p>
<p><a href="shell.html" class="reference"><code>shell</code></a> is not a &quot;true&quot; API. Instead, it is a standard program, which injects
its API into the programs that it launches. This allows for multiple shells to
run at the same time, but means that the API is not available in the global
environment, and so is unavailable to other <a href="os.html#v:loadAPI" class="reference">APIs</a>.</p>
<h2>Programs and the program path</h2>
<p>When you run a command with the shell, either from the prompt or
<a href="shell.html#v:run" class="reference">from Lua code</a>, the shell API performs several steps to work out
which program to run:</p>
<ol>
<li>
<p>Firstly, the shell attempts to resolve <a href="shell.html#v:aliases" class="reference">aliases</a>. This allows
us to use multiple names for a single command. For example, the <code>list</code>
program has two aliases: <code>ls</code> and <code>dir</code>. When you write <code>ls /rom</code>, that's
expanded to <code>list /rom</code>.</p>
</li>
<li>
<p>Next, the shell attempts to find where the program actually is. For this, it
uses the <a href="shell.html#v:path" class="reference">program path</a>. This is a colon separated list of
directories, each of which is checked to see if it contains the program.</p>
<p><code>list</code> or <code>list.lua</code> doesn't exist in <code>.</code> (the current directory), so the
shell now looks in <code>/rom/programs</code>, where <code>list.lua</code> can be found!</p>
</li>
<li>
<p>Finally, the shell reads the file and checks if the file starts with a
<code>#!</code>. This is a <a href="https://en.wikipedia.org/wiki/Shebang_(Unix)">hashbang</a>, which says that this file shouldn't be treated
as Lua, but instead passed to <em>another</em> program, the name of which should
follow the <code>#!</code>.</p>
</li>
</ol>
<h3>Changes</h3><ul><li><strong>Changed in version 1.103.0:</strong> Added support for hashbangs.</li></ul><table class="definition-list"><tr><th class="definition-name"><a href="#v:execute">execute(command, ...)</a></th><td>Run a program with the supplied arguments.</td></tr><tr><th class="definition-name"><a href="#v:run">run(...)</a></th><td>Run a program with the supplied arguments.</td></tr><tr><th class="definition-name"><a href="#v:exit">exit()</a></th><td>Exit the current shell.</td></tr><tr><th class="definition-name"><a href="#v:dir">dir()</a></th><td>Return the current working directory.</td></tr><tr><th class="definition-name"><a href="#v:setDir">setDir(dir)</a></th><td>Set the current working directory.</td></tr><tr><th class="definition-name"><a href="#v:path">path()</a></th><td>Set the path where programs are located.</td></tr><tr><th class="definition-name"><a href="#v:setPath">setPath(path)</a></th><td>Set the <a href="shell.html#v:path" class="reference">current program path</a>.</td></tr><tr><th class="definition-name"><a href="#v:resolve">resolve(path)</a></th><td>Resolve a relative path to an absolute path.</td></tr><tr><th class="definition-name"><a href="#v:resolveProgram">resolveProgram(command)</a></th><td>Resolve a program, using the <a href="shell.html#v:path" class="reference">program path</a> and list of <a href="shell.html#v:aliases" class="reference">aliases</a>.</td></tr><tr><th class="definition-name"><a href="#v:programs">programs([include_hidden])</a></th><td>Return a list of all programs on the <a href="shell.html#v:path" class="reference">path</a>.</td></tr><tr><th class="definition-name"><a href="#v:complete">complete(sLine)</a></th><td>Complete a shell command line.</td></tr><tr><th class="definition-name"><a href="#v:completeProgram">completeProgram(program)</a></th><td>Complete the name of a program.</td></tr><tr><th class="definition-name"><a href="#v:setCompletionFunction">setCompletionFunction(program, complete)</a></th><td>Set the completion function for a program.</td></tr><tr><th class="definition-name"><a href="#v:getCompletionInfo">getCompletionInfo()</a></th><td>Get a table containing all completion functions.</td></tr><tr><th class="definition-name"><a href="#v:getRunningProgram">getRunningProgram()</a></th><td>Returns the path to the currently running program.</td></tr><tr><th class="definition-name"><a href="#v:setAlias">setAlias(command, program)</a></th><td>Add an alias for a program.</td></tr><tr><th class="definition-name"><a href="#v:clearAlias">clearAlias(command)</a></th><td>Remove an alias.</td></tr><tr><th class="definition-name"><a href="#v:aliases">aliases()</a></th><td>Get the current aliases for this shell.</td></tr><tr><th class="definition-name"><a href="#v:openTab">openTab(...)</a></th><td>Open a new <a href="multishell.html" class="reference"><code>multishell</code></a> tab running a command.</td></tr><tr><th class="definition-name"><a href="#v:switchTab">switchTab(id)</a></th><td>Switch to the <a href="multishell.html" class="reference"><code>multishell</code></a> tab with the given index.</td></tr></table><dl class="definition"><dt><a name="v:execute" href="#v:execute"></a><span class="definition-name">execute(command, ...)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L206" class="source-link">Source</a></dt><dd><p>Run a program with the supplied arguments.</p>
<p>Unlike <a href="shell.html#v:run" class="reference"><code>shell.run</code></a>, each argument is passed to the program verbatim. While
<code>shell.run(&quot;echo&quot;, &quot;b c&quot;)</code> runs <code>echo</code> with <code>b</code> and <code>c</code>,
<code>shell.execute(&quot;echo&quot;, &quot;b c&quot;)</code> runs <code>echo</code> with a single argument <code>b c</code>.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">command</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The program to execute.</li><li><span class="parameter">...</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> Arguments to this program.</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type"><span class="reference reference-unresolved"><code>boolean</code></span></span> Whether the program exited successfully.</li></ol><h3>Usage</h3><ul><li><p>Run <code>paint my-image</code> from within your program:</p>
<pre class="highlight" data-lua-kind="expr"><a title="Run a program with the supplied arguments." href="shell.html#v:execute"><span class="ident">shell</span><span class="symbol">.</span><span class="symbol">execute</span></a><span class="symbol">(</span><span class="string">"paint"</span><span class="symbol">,</span> <span class="string">"my-image"</span><span class="symbol">)</span><span class="symbol"></span></pre></li></ul><h3>Changes</h3><ul><li><strong>New in version 1.88.0</strong> </li></ul></dd><dt><a name="v:run" href="#v:run"></a><span class="definition-name">run(...)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L260" class="source-link">Source</a></dt><dd><p>Run a program with the supplied arguments.</p>
<p>All arguments are concatenated together and then parsed as a command line. As
a result, <code>shell.run(&quot;program a b&quot;)</code> is the same as <code>shell.run(&quot;program&quot;, &quot;a&quot;, &quot;b&quot;)</code>.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">...</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The program to run and its arguments.</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type"><span class="reference reference-unresolved"><code>boolean</code></span></span> Whether the program exited successfully.</li></ol><h3>Usage</h3><ul><li><p>Run <code>paint my-image</code> from within your program:</p>
<pre class="highlight" data-lua-kind="expr"><a title="Run a program with the supplied arguments." href="shell.html#v:run"><span class="ident">shell</span><span class="symbol">.</span><span class="symbol">run</span></a><span class="symbol">(</span><span class="string">"paint"</span><span class="symbol">,</span> <span class="string">"my-image"</span><span class="symbol">)</span><span class="symbol"></span></pre></li></ul><h3>See also</h3><ul><li><strong><a href="shell.html#v:execute" class="reference"><code>shell.execute</code></a></strong> Run a program directly without parsing the arguments.</li></ul><h3>Changes</h3><ul><li><strong>Changed in version 1.80pr1:</strong> Programs now get their own environment instead of sharing the same one.</li><li><strong>Changed in version 1.83.0:</strong> <code>arg</code> is now added to the environment.</li></ul></dd><dt><a name="v:exit" href="#v:exit"></a><span class="definition-name">exit()</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L274" class="source-link">Source</a></dt><dd><p>Exit the current shell.</p>
<p>This does <em>not</em> terminate your program, it simply makes the shell terminate
after your program has finished. If this is the toplevel shell, then the
computer will be shutdown.</p>
</dd><dt><a name="v:dir" href="#v:dir"></a><span class="definition-name">dir()</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L284" class="source-link">Source</a></dt><dd><p>Return the current working directory. This is what is displayed before the
<code>&gt; </code> of the shell prompt, and is used by <a href="shell.html#v:resolve" class="reference"><code>shell.resolve</code></a> to handle relative
paths.</p>
<h3>Returns</h3><ol class="return-list"><li><span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The current working directory.</li></ol><h3>See also</h3><ul><li><strong><a href="shell.html#v:setDir" class="reference"><code>setDir</code></a></strong> To change the working directory.</li></ul></dd><dt><a name="v:setDir" href="#v:setDir"></a><span class="definition-name">setDir(dir)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L295" class="source-link">Source</a></dt><dd><p>Set the current working directory.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">dir</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The new working directory.</li></ol><h3>Throws</h3><ul><li><p>If the path does not exist or is not a directory.</p>
</li></ul><h3>Usage</h3><ul><li><p>Set the working directory to &quot;rom&quot;</p>
<pre class="highlight" data-lua-kind="expr"><a title="Set the current working directory." href="shell.html#v:setDir"><span class="ident">shell</span><span class="symbol">.</span><span class="symbol">setDir</span></a><span class="symbol">(</span><span class="string">"rom"</span><span class="symbol">)</span><span class="symbol"></span></pre></li></ul></dd><dt><a name="v:path" href="#v:path"></a><span class="definition-name">path()</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L312" class="source-link">Source</a></dt><dd><p>Set the path where programs are located.</p>
<p>The path is composed of a list of directory names in a string, each separated
by a colon (<code>:</code>). On normal turtles will look in the current directory (<code>.</code>),
<code>/rom/programs</code> and <code>/rom/programs/turtle</code> folder, making the path
<code>.:/rom/programs:/rom/programs/turtle</code>.</p>
<h3>Returns</h3><ol class="return-list"><li><span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The current shell's path.</li></ol><h3>See also</h3><ul><li><strong><a href="shell.html#v:setPath" class="reference"><code>setPath</code></a></strong> To change the current path.</li></ul></dd><dt><a name="v:setPath" href="#v:setPath"></a><span class="definition-name">setPath(path)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L323" class="source-link">Source</a></dt><dd><p>Set the <a href="shell.html#v:path" class="reference">current program path</a>.</p>
<p>Be careful to prefix directories with a <code>/</code>. Otherwise they will be searched
for from the <a href="shell.html#v:dir" class="reference">current directory</a>, rather than the computer's root.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">path</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The new program path.</li></ol><h3>Changes</h3><ul><li><strong>New in version 1.2</strong> </li></ul></dd><dt><a name="v:resolve" href="#v:resolve"></a><span class="definition-name">resolve(path)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L340" class="source-link">Source</a></dt><dd><p>Resolve a relative path to an absolute path.</p>
<p>The <a href="fs.html" class="reference"><code>fs</code></a> and <a href="io.html" class="reference"><code>io</code></a> APIs work using absolute paths, and so we must convert
any paths relative to the <a href="shell.html#v:dir" class="reference">current directory</a> to absolute ones. This
does nothing when the path starts with <code>/</code>.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">path</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The path to resolve.</li></ol><h3>Usage</h3><ul><li><p>Resolve <code>startup.lua</code> when in the <code>rom</code> folder.</p>
<pre class="highlight" data-lua-kind="stmt"><a title="Set the current working directory." href="shell.html#v:setDir"><span class="ident">shell</span><span class="symbol">.</span><span class="symbol">setDir</span></a><span class="symbol">(</span><span class="string">"rom"</span><span class="symbol">)</span>
<span class="ident">print</span><span class="symbol">(</span><a title="Resolve a relative path to an absolute path." href="shell.html#v:resolve"><span class="ident">shell</span><span class="symbol">.</span><span class="symbol">resolve</span></a><span class="symbol">(</span><span class="string">"startup.lua"</span><span class="symbol">)</span><span class="symbol">)</span>
<span class="comment">-- => rom/startup.lua</span><span class="symbol"></span></pre></li></ul></dd><dt><a name="v:resolveProgram" href="#v:resolveProgram"></a><span class="definition-name">resolveProgram(command)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L371" class="source-link">Source</a></dt><dd><p>Resolve a program, using the <a href="shell.html#v:path" class="reference">program path</a> and list of <a href="shell.html#v:aliases" class="reference">aliases</a>.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">command</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The name of the program</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> | nil</span> The absolute path to the program, or <span class="reference reference-unresolved"><code>nil</code></span> if it could
not be found.</li></ol><h3>Usage</h3><ul><li><p>Locate the <code>hello</code> program.</p>
<pre class="highlight" data-lua-kind="expr"><a title="Resolve a program, using the program path and list of aliases." href="shell.html#v:resolveProgram"> <span class="ident">shell</span><span class="symbol">.</span><span class="symbol">resolveProgram</span></a><span class="symbol">(</span><span class="string">"hello"</span><span class="symbol">)</span>
 <span class="comment">-- => rom/programs/fun/hello.lua</span><span class="symbol"></span></pre></li></ul><h3>Changes</h3><ul><li><strong>New in version 1.2</strong> </li><li><strong>Changed in version 1.80pr1:</strong> Now searches for files with and without the <code>.lua</code> extension.</li></ul></dd><dt><a name="v:programs" href="#v:programs"></a><span class="definition-name">programs([include_hidden])</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L416" class="source-link">Source</a></dt><dd><p>Return a list of all programs on the <a href="shell.html#v:path" class="reference">path</a>.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">include_hidden<span class="optional" title="This argument is optional">?</span></span> <span class="type"><span class="reference reference-unresolved"><code>boolean</code></span></span> Include hidden files. Namely, any which
start with <code>.</code>.</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type">{ <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }</span> A list of available programs.</li></ol><h3>Usage</h3><ul><li><pre class="highlight" data-lua-kind="expr"><a title="Prints tables in a structured form." href="textutils.html#v:tabulate"><span class="ident">textutils</span><span class="symbol">.</span><span class="symbol">tabulate</span></a><span class="symbol">(</span><a title="Return a list of all programs on the path." href="shell.html#v:programs"><span class="ident">shell</span><span class="symbol">.</span><span class="symbol">programs</span></a><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">)</span><span class="symbol"></span></pre></li></ul><h3>Changes</h3><ul><li><strong>New in version 1.2</strong> </li></ul></dd><dt><a name="v:complete" href="#v:complete"></a><span class="definition-name">complete(sLine)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L530" class="source-link">Source</a></dt><dd><p>Complete a shell command line.</p>
<p>This accepts an incomplete command, and completes the program name or
arguments. For instance, <code>l</code> will be completed to <code>ls</code>, and <code>ls ro</code> will be
completed to <code>ls rom/</code>.</p>
<p>Completion handlers for your program may be registered with
<a href="shell.html#v:setCompletionFunction" class="reference"><code>shell.setCompletionFunction</code></a>.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">sLine</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The input to complete.</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type">{ <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> } | nil</span> The list of possible completions.</li></ol><h3>See also</h3><ul><li><strong><a href="_G.html#v:read" class="reference"><code>_G.read</code></a></strong> For more information about completion.</li><li><strong><a href="shell.html#v:completeProgram" class="reference"><code>shell.completeProgram</code></a></strong> </li><li><strong><a href="shell.html#v:setCompletionFunction" class="reference"><code>shell.setCompletionFunction</code></a></strong> </li><li><strong><a href="shell.html#v:getCompletionInfo" class="reference"><code>shell.getCompletionInfo</code></a></strong> </li></ul><h3>Changes</h3><ul><li><strong>New in version 1.74</strong> </li></ul></dd><dt><a name="v:completeProgram" href="#v:completeProgram"></a><span class="definition-name">completeProgram(program)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L572" class="source-link">Source</a></dt><dd><p>Complete the name of a program.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">program</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The name of a program to complete.</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type">{ <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }</span> A list of possible completions.</li></ol><h3>See also</h3><ul><li><strong><a href="../library/cc.shell.completion.html#v:program" class="reference"><code>cc.shell.completion.program</code></a></strong> </li></ul></dd><dt><a name="v:setCompletionFunction" href="#v:setCompletionFunction"></a><span class="definition-name">setCompletionFunction(program, complete)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L606" class="source-link">Source</a></dt><dd><p>Set the completion function for a program. When the program is entered on
the command line, this program will be called to provide auto-complete
information.</p>
<p>The completion function accepts four arguments:</p>
<ol>
<li>The current shell. As completion functions are inherited, this is not
guaranteed to be the shell you registered this function in.</li>
<li>The index of the argument currently being completed.</li>
<li>The current argument. This may be the empty string.</li>
<li>A list of the previous arguments.</li>
</ol>
<p>For instance, when completing <code>pastebin put rom/st</code> our pastebin completion
function will receive the shell API, an index of 2, <code>rom/st</code> as the current
argument, and a &quot;previous&quot; table of <code>{ &quot;put&quot; }</code>. This function may then wish
to return a table containing <code>artup.lua</code>, indicating the entire command
should be completed to <code>pastebin put rom/startup.lua</code>.</p>
<p>You completion entries may also be followed by a space, if you wish to
indicate another argument is expected.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">program</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The path to the program. This should be an absolute path
<em>without</em> the leading <code>/</code>.</li><li><span class="parameter">complete</span> <span class="type">function(shell: <a href="https://www.lua.org/manual/5.1/manual.html#5.5" class="reference"><code>table</code></a>, index: <span class="reference reference-unresolved"><code>number</code></span>, argument: <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>, previous: { <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }):{ <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> } | nil</span> The completion function.</li></ol><h3>See also</h3><ul><li><strong><a href="../library/cc.shell.completion.html" class="reference"><code>cc.shell.completion</code></a></strong> Various utilities to help with writing completion functions.</li><li><strong><a href="shell.html#v:complete" class="reference"><code>shell.complete</code></a></strong> </li><li><strong><a href="_G.html#v:read" class="reference"><code>_G.read</code></a></strong> For more information about completion.</li></ul><h3>Changes</h3><ul><li><strong>New in version 1.74</strong> </li></ul></dd><dt><a name="v:getCompletionInfo" href="#v:getCompletionInfo"></a><span class="definition-name">getCompletionInfo()</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L621" class="source-link">Source</a></dt><dd><p>Get a table containing all completion functions.</p>
<p>This should only be needed when building custom shells. Use
<a href="shell.html#v:setCompletionFunction" class="reference"><code>setCompletionFunction</code></a> to add a completion function.</p>
<h3>Returns</h3><ol class="return-list"><li><span class="type">{ [<a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>] = { fnComplete = <span class="reference reference-unresolved"><code>function</code></span> } }</span> A table mapping the
absolute path of programs, to their completion functions.</li></ol></dd><dt><a name="v:getRunningProgram" href="#v:getRunningProgram"></a><span class="definition-name">getRunningProgram()</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L629" class="source-link">Source</a></dt><dd><p>Returns the path to the currently running program.</p>
<h3>Returns</h3><ol class="return-list"><li><span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The absolute path to the running program.</li></ol><h3>Changes</h3><ul><li><strong>New in version 1.3</strong> </li></ul></dd><dt><a name="v:setAlias" href="#v:setAlias"></a><span class="definition-name">setAlias(command, program)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L644" class="source-link">Source</a></dt><dd><p>Add an alias for a program.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">command</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The name of the alias to add.</li><li><span class="parameter">program</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The name or path to the program.</li></ol><h3>Usage</h3><ul><li><p>Alias <code>vim</code> to the <code>edit</code> program</p>
<pre class="highlight" data-lua-kind="expr"><a title="Add an alias for a program." href="shell.html#v:setAlias"><span class="ident">shell</span><span class="symbol">.</span><span class="symbol">setAlias</span></a><span class="symbol">(</span><span class="string">"vim"</span><span class="symbol">,</span> <span class="string">"edit"</span><span class="symbol">)</span><span class="symbol"></span></pre></li></ul><h3>Changes</h3><ul><li><strong>New in version 1.2</strong> </li></ul></dd><dt><a name="v:clearAlias" href="#v:clearAlias"></a><span class="definition-name">clearAlias(command)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L653" class="source-link">Source</a></dt><dd><p>Remove an alias.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">command</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The alias name to remove.</li></ol></dd><dt><a name="v:aliases" href="#v:aliases"></a><span class="definition-name">aliases()</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L669" class="source-link">Source</a></dt><dd><p>Get the current aliases for this shell.</p>
<p>Aliases are used to allow multiple commands to refer to a single program. For
instance, the <code>list</code> program is aliased to <code>dir</code> or <code>ls</code>. Running <code>ls</code>, <code>dir</code>
or <code>list</code> in the shell will all run the <code>list</code> program.</p>
<h3>Returns</h3><ol class="return-list"><li><span class="type">{ [<a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>] = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }</span> A table, where the keys are the names of
aliases, and the values are the path to the program.</li></ol><h3>See also</h3><ul><li><strong><a href="shell.html#v:setAlias" class="reference"><code>shell.setAlias</code></a></strong> </li><li><strong><a href="shell.html#v:resolveProgram" class="reference"><code>shell.resolveProgram</code></a></strong> This uses aliases when resolving a program name to
an absolute path.</li></ul></dd><dt><a name="v:openTab" href="#v:openTab"></a><span class="definition-name">openTab(...)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L694" class="source-link">Source</a></dt><dd><p>Open a new <a href="multishell.html" class="reference"><code>multishell</code></a> tab running a command.</p>
<p>This behaves similarly to <a href="shell.html#v:run" class="reference"><code>shell.run</code></a>, but instead returns the process
index.</p>
<p>This function is only available if the <a href="multishell.html" class="reference"><code>multishell</code></a> API is.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">...</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The command line to run.</li></ol><h3>Usage</h3><ul><li><p>Launch the Lua interpreter and switch to it.</p>
<pre class="highlight" data-lua-kind="stmt"><span class="keyword">local</span> <span class="ident">id</span> <span class="symbol">=</span> <a title="Open a new multishell tab running a command." href="shell.html#v:openTab"><span class="ident">shell</span><span class="symbol">.</span><span class="symbol">openTab</span></a><span class="symbol">(</span><span class="string">"lua"</span><span class="symbol">)</span>
<a title="Switch to the multishell tab with the given index." href="shell.html#v:switchTab"><span class="ident">shell</span><span class="symbol">.</span><span class="symbol">switchTab</span></a><span class="symbol">(</span><span class="ident">id</span><span class="symbol">)</span><span class="symbol"></span></pre></li></ul><h3>See also</h3><ul><li><strong><a href="shell.html#v:run" class="reference"><code>shell.run</code></a></strong> </li><li><strong><a href="multishell.html#v:launch" class="reference"><code>multishell.launch</code></a></strong> </li></ul><h3>Changes</h3><ul><li><strong>New in version 1.6</strong> </li></ul></dd><dt><a name="v:switchTab" href="#v:switchTab"></a><span class="definition-name">switchTab(id)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/cdeb72514acfbc1fb67cceddc0ce26738f52c5b7/projects/core/src/main/resources/data/computercraft/lua/rom/programs/shell.lua#L714" class="source-link">Source</a></dt><dd><p>Switch to the <a href="multishell.html" class="reference"><code>multishell</code></a> tab with the given index.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">id</span> <span class="type"><span class="reference reference-unresolved"><code>number</code></span></span> The tab to switch to.</li></ol><h3>See also</h3><ul><li><strong><a href="multishell.html#v:setFocus" class="reference"><code>multishell.setFocus</code></a></strong> </li></ul><h3>Changes</h3><ul><li><strong>New in version 1.6</strong> </li></ul></dd></dl></section><footer>Last updated on 2023-10-11</footer></div><div id="search-overlay"></div><script src="../main.js?v=f449c6d1" type="text/javascript" defer=""></script></body></html>